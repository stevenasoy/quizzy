{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array-buffer.constructor.js\";\nimport \"core-js/modules/es.array-buffer.slice.js\";\nimport \"core-js/modules/es.data-view.js\";\nimport \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.typed-array.uint8-array.js\";\nimport \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.copy-within.js\";\nimport \"core-js/modules/es.typed-array.every.js\";\nimport \"core-js/modules/es.typed-array.fill.js\";\nimport \"core-js/modules/es.typed-array.filter.js\";\nimport \"core-js/modules/es.typed-array.find.js\";\nimport \"core-js/modules/es.typed-array.find-index.js\";\nimport \"core-js/modules/es.typed-array.find-last.js\";\nimport \"core-js/modules/es.typed-array.find-last-index.js\";\nimport \"core-js/modules/es.typed-array.for-each.js\";\nimport \"core-js/modules/es.typed-array.includes.js\";\nimport \"core-js/modules/es.typed-array.index-of.js\";\nimport \"core-js/modules/es.typed-array.iterator.js\";\nimport \"core-js/modules/es.typed-array.join.js\";\nimport \"core-js/modules/es.typed-array.last-index-of.js\";\nimport \"core-js/modules/es.typed-array.map.js\";\nimport \"core-js/modules/es.typed-array.reduce.js\";\nimport \"core-js/modules/es.typed-array.reduce-right.js\";\nimport \"core-js/modules/es.typed-array.reverse.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/es.typed-array.slice.js\";\nimport \"core-js/modules/es.typed-array.some.js\";\nimport \"core-js/modules/es.typed-array.sort.js\";\nimport \"core-js/modules/es.typed-array.subarray.js\";\nimport \"core-js/modules/es.typed-array.to-locale-string.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.to-string.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n/**\r\n * Text Extraction Module\r\n */\n\n/**\r\n * Extract text from PDF buffer\r\n * @param {ArrayBuffer} arrayBuffer - PDF file buffer\r\n * @returns {Promise<string>} Extracted text\r\n */\nexport function extractPdfText(_x) {\n  return _extractPdfText.apply(this, arguments);\n}\nfunction _extractPdfText() {\n  _extractPdfText = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(arrayBuffer) {\n    var typedArray, pdf, text, _loop, i;\n    return _regeneratorRuntime().wrap(function _callee$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          typedArray = new Uint8Array(arrayBuffer);\n          _context2.next = 3;\n          return pdfjsLib.getDocument({\n            data: typedArray\n          }).promise;\n        case 3:\n          pdf = _context2.sent;\n          text = \"\";\n          _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n            var page, content, lastY, line;\n            return _regeneratorRuntime().wrap(function _loop$(_context) {\n              while (1) switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return pdf.getPage(i);\n                case 2:\n                  page = _context.sent;\n                  _context.next = 5;\n                  return page.getTextContent();\n                case 5:\n                  content = _context.sent;\n                  // Group items by line (y position)\n                  lastY = null;\n                  line = [];\n                  content.items.forEach(function (item) {\n                    if (lastY === null || Math.abs(item.transform[5] - lastY) < 2) {\n                      line.push(item.str);\n                    } else {\n                      text += line.join(\" \") + \"\\n\";\n                      line = [item.str];\n                    }\n                    lastY = item.transform[5];\n                  });\n                  if (line.length) {\n                    text += line.join(\" \") + \"\\n\";\n                  }\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }, _loop);\n          });\n          i = 1;\n        case 7:\n          if (!(i <= pdf.numPages)) {\n            _context2.next = 12;\n            break;\n          }\n          return _context2.delegateYield(_loop(), \"t0\", 9);\n        case 9:\n          i++;\n          _context2.next = 7;\n          break;\n        case 12:\n          return _context2.abrupt(\"return\", text);\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee);\n  }));\n  return _extractPdfText.apply(this, arguments);\n}","map":{"version":3,"names":["extractPdfText","_x","_extractPdfText","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","arrayBuffer","typedArray","pdf","text","_loop","i","wrap","_callee$","_context2","prev","next","Uint8Array","pdfjsLib","getDocument","data","promise","sent","page","content","lastY","line","_loop$","_context","getPage","getTextContent","items","forEach","item","Math","abs","transform","push","str","join","length","stop","numPages","delegateYield","abrupt"],"sources":["C:/Users/StevenJakeASOY/Documents/cursor-projects/src/algorithms/text-extraction/index.js"],"sourcesContent":["/**\r\n * Text Extraction Module\r\n */\r\n\r\n/**\r\n * Extract text from PDF buffer\r\n * @param {ArrayBuffer} arrayBuffer - PDF file buffer\r\n * @returns {Promise<string>} Extracted text\r\n */\r\nexport async function extractPdfText(arrayBuffer) {\r\n  const typedArray = new Uint8Array(arrayBuffer);\r\n  const pdf = await pdfjsLib.getDocument({ data: typedArray }).promise;\r\n  let text = \"\";\r\n  \r\n  for (let i = 1; i <= pdf.numPages; i++) {\r\n    const page = await pdf.getPage(i);\r\n    const content = await page.getTextContent();\r\n    \r\n    // Group items by line (y position)\r\n    let lastY = null;\r\n    let line = [];\r\n    \r\n    content.items.forEach(item => {\r\n      if (lastY === null || Math.abs(item.transform[5] - lastY) < 2) {\r\n        line.push(item.str);\r\n      } else {\r\n        text += line.join(\" \") + \"\\n\";\r\n        line = [item.str];\r\n      }\r\n      lastY = item.transform[5];\r\n    });\r\n    \r\n    if (line.length) {\r\n      text += line.join(\" \") + \"\\n\";\r\n    }\r\n  }\r\n  \r\n  return text;\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}