{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { ref, onMounted } from 'vue';\nimport { useLocalStorage } from '@vueuse/core';\nimport { auth } from '../lib/supabase';\nexport function useAuth() {\n  var user = ref(null);\n  var isLoading = ref(true);\n  var error = ref(null);\n\n  // Store temporary quiz history\n  var temporaryHistory = useLocalStorage('temporaryQuizHistory', []);\n\n  // Initialize auth state\n  onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var _yield$auth$getSessio, session;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return auth.getSession();\n        case 3:\n          _yield$auth$getSessio = _context.sent;\n          session = _yield$auth$getSessio.session;\n          user.value = (session === null || session === void 0 ? void 0 : session.user) || null;\n          _context.next = 11;\n          break;\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          error.value = _context.t0.message;\n        case 11:\n          _context.prev = 11;\n          isLoading.value = false;\n          return _context.finish(11);\n        case 14:\n          // Listen for auth state changes\n          auth.onAuthStateChange(function (_event, session) {\n            user.value = (session === null || session === void 0 ? void 0 : session.user) || null;\n          });\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8, 11, 14]]);\n  })));\n  var signUp = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2) {\n      var email, password, name, _yield$auth$signUp, data, signUpError;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            email = _ref2.email, password = _ref2.password, name = _ref2.name;\n            error.value = null;\n            isLoading.value = true;\n            _context2.prev = 3;\n            _context2.next = 6;\n            return auth.signUp({\n              email: email,\n              password: password,\n              name: name\n            });\n          case 6:\n            _yield$auth$signUp = _context2.sent;\n            data = _yield$auth$signUp.data;\n            signUpError = _yield$auth$signUp.error;\n            if (!signUpError) {\n              _context2.next = 11;\n              break;\n            }\n            throw signUpError;\n          case 11:\n            return _context2.abrupt(\"return\", {\n              data: data,\n              error: null\n            });\n          case 14:\n            _context2.prev = 14;\n            _context2.t0 = _context2[\"catch\"](3);\n            error.value = _context2.t0.message;\n            return _context2.abrupt(\"return\", {\n              data: null,\n              error: _context2.t0\n            });\n          case 18:\n            _context2.prev = 18;\n            isLoading.value = false;\n            return _context2.finish(18);\n          case 21:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[3, 14, 18, 21]]);\n    }));\n    return function signUp(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var signIn = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref4) {\n      var email, password, _yield$auth$signIn, data, signInError;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            email = _ref4.email, password = _ref4.password;\n            error.value = null;\n            isLoading.value = true;\n            _context3.prev = 3;\n            _context3.next = 6;\n            return auth.signIn({\n              email: email,\n              password: password\n            });\n          case 6:\n            _yield$auth$signIn = _context3.sent;\n            data = _yield$auth$signIn.data;\n            signInError = _yield$auth$signIn.error;\n            if (!signInError) {\n              _context3.next = 11;\n              break;\n            }\n            throw signInError;\n          case 11:\n            return _context3.abrupt(\"return\", {\n              data: data,\n              error: null\n            });\n          case 14:\n            _context3.prev = 14;\n            _context3.t0 = _context3[\"catch\"](3);\n            error.value = _context3.t0.message;\n            return _context3.abrupt(\"return\", {\n              data: null,\n              error: _context3.t0\n            });\n          case 18:\n            _context3.prev = 18;\n            isLoading.value = false;\n            return _context3.finish(18);\n          case 21:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, null, [[3, 14, 18, 21]]);\n    }));\n    return function signIn(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var signOut = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var _yield$auth$signOut, signOutError;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            error.value = null;\n            _context4.prev = 1;\n            _context4.next = 4;\n            return auth.signOut();\n          case 4:\n            _yield$auth$signOut = _context4.sent;\n            signOutError = _yield$auth$signOut.error;\n            if (!signOutError) {\n              _context4.next = 8;\n              break;\n            }\n            throw signOutError;\n          case 8:\n            _context4.next = 13;\n            break;\n          case 10:\n            _context4.prev = 10;\n            _context4.t0 = _context4[\"catch\"](1);\n            error.value = _context4.t0.message;\n          case 13:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4, null, [[1, 10]]);\n    }));\n    return function signOut() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  return {\n    user: user,\n    isLoading: isLoading,\n    error: error,\n    temporaryHistory: temporaryHistory,\n    signUp: signUp,\n    signIn: signIn,\n    signOut: signOut\n  };\n}","map":{"version":3,"names":["ref","onMounted","useLocalStorage","auth","useAuth","user","isLoading","error","temporaryHistory","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$auth$getSessio","session","wrap","_callee$","_context","prev","next","getSession","sent","value","t0","message","finish","onAuthStateChange","_event","stop","signUp","_ref3","_callee2","_ref2","email","password","name","_yield$auth$signUp","data","signUpError","_callee2$","_context2","abrupt","_x","apply","arguments","signIn","_ref5","_callee3","_ref4","_yield$auth$signIn","signInError","_callee3$","_context3","_x2","signOut","_ref6","_callee4","_yield$auth$signOut","signOutError","_callee4$","_context4"],"sources":["C:/Users/StevenJakeASOY/Documents/cursor-projects/src/composables/useAuth.js"],"sourcesContent":["import { ref, onMounted } from 'vue';\r\nimport { useLocalStorage } from '@vueuse/core';\r\nimport { auth } from '../lib/supabase';\r\n\r\nexport function useAuth() {\r\n  const user = ref(null);\r\n  const isLoading = ref(true);\r\n  const error = ref(null);\r\n\r\n  // Store temporary quiz history\r\n  const temporaryHistory = useLocalStorage('temporaryQuizHistory', []);\r\n\r\n  // Initialize auth state\r\n  onMounted(async () => {\r\n    try {\r\n      const { session } = await auth.getSession();\r\n      user.value = session?.user || null;\r\n    } catch (err) {\r\n      error.value = err.message;\r\n    } finally {\r\n      isLoading.value = false;\r\n    }\r\n\r\n    // Listen for auth state changes\r\n    auth.onAuthStateChange((_event, session) => {\r\n      user.value = session?.user || null;\r\n    });\r\n  });\r\n\r\n  const signUp = async ({ email, password, name }) => {\r\n    error.value = null;\r\n    isLoading.value = true;\r\n    try {\r\n      const { data, error: signUpError } = await auth.signUp({\r\n        email,\r\n        password,\r\n        name\r\n      });\r\n      if (signUpError) throw signUpError;\r\n      return { data, error: null };\r\n    } catch (err) {\r\n      error.value = err.message;\r\n      return { data: null, error: err };\r\n    } finally {\r\n      isLoading.value = false;\r\n    }\r\n  };\r\n\r\n  const signIn = async ({ email, password }) => {\r\n    error.value = null;\r\n    isLoading.value = true;\r\n    try {\r\n      const { data, error: signInError } = await auth.signIn({\r\n        email,\r\n        password\r\n      });\r\n      if (signInError) throw signInError;\r\n      return { data, error: null };\r\n    } catch (err) {\r\n      error.value = err.message;\r\n      return { data: null, error: err };\r\n    } finally {\r\n      isLoading.value = false;\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    error.value = null;\r\n    try {\r\n      const { error: signOutError } = await auth.signOut();\r\n      if (signOutError) throw signOutError;\r\n    } catch (err) {\r\n      error.value = err.message;\r\n    }\r\n  };\r\n\r\n  return {\r\n    user,\r\n    isLoading,\r\n    error,\r\n    temporaryHistory,\r\n    signUp,\r\n    signIn,\r\n    signOut\r\n  };\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}