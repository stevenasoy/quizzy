{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _toConsumableArray from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectSpread from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { ref } from 'vue';\nimport { useAuth } from './useAuth';\nimport { useLocalStorage } from '@vueuse/core';\nexport function useQuizHistory() {\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  var quizHistory = ref([]);\n  var storedHistory = useLocalStorage('quizHistory', []);\n  var saveQuiz = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(quizData) {\n      var _user$value, newQuiz;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            newQuiz = _objectSpread(_objectSpread({\n              id: crypto.randomUUID()\n            }, quizData), {}, {\n              user_id: (_user$value = user.value) === null || _user$value === void 0 ? void 0 : _user$value.id,\n              created_at: new Date().toISOString()\n            }); // Add to stored history\n            storedHistory.value = [newQuiz].concat(_toConsumableArray(storedHistory.value));\n            quizHistory.value = storedHistory.value;\n            return _context.abrupt(\"return\", {\n              data: newQuiz,\n              error: null\n            });\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('Error saving quiz:', _context.t0);\n            return _context.abrupt(\"return\", {\n              data: null,\n              error: _context.t0\n            });\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n    return function saveQuiz(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var fetchQuizzes = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            // Filter quizzes by user if logged in\n            if (user.value) {\n              quizHistory.value = storedHistory.value.filter(function (quiz) {\n                return quiz.user_id === user.value.id;\n              });\n            } else {\n              quizHistory.value = storedHistory.value;\n            }\n            return _context2.abrupt(\"return\", {\n              data: quizHistory.value,\n              error: null\n            });\n          case 5:\n            _context2.prev = 5;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.error('Error fetching quizzes:', _context2.t0);\n            return _context2.abrupt(\"return\", {\n              data: null,\n              error: _context2.t0\n            });\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[0, 5]]);\n    }));\n    return function fetchQuizzes() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var clearHistory = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            if (user.value) {\n              // Clear only user's quizzes\n              storedHistory.value = storedHistory.value.filter(function (quiz) {\n                return quiz.user_id !== user.value.id;\n              });\n            } else {\n              // Clear all quizzes\n              storedHistory.value = [];\n            }\n            quizHistory.value = storedHistory.value;\n            return _context3.abrupt(\"return\", {\n              error: null\n            });\n          case 6:\n            _context3.prev = 6;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.error('Error clearing history:', _context3.t0);\n            return _context3.abrupt(\"return\", {\n              error: _context3.t0\n            });\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, null, [[0, 6]]);\n    }));\n    return function clearHistory() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return {\n    quizHistory: quizHistory,\n    saveQuiz: saveQuiz,\n    fetchQuizzes: fetchQuizzes,\n    clearHistory: clearHistory\n  };\n}","map":{"version":3,"names":["ref","useAuth","useLocalStorage","useQuizHistory","_useAuth","user","quizHistory","storedHistory","saveQuiz","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","quizData","_user$value","newQuiz","wrap","_callee$","_context","prev","next","_objectSpread","id","crypto","randomUUID","user_id","value","created_at","Date","toISOString","concat","_toConsumableArray","abrupt","data","error","t0","console","stop","_x","apply","arguments","fetchQuizzes","_ref2","_callee2","_callee2$","_context2","filter","quiz","clearHistory","_ref3","_callee3","_callee3$","_context3"],"sources":["C:/Users/StevenJakeASOY/Documents/cursor-projects/src/composables/useQuizHistory.js"],"sourcesContent":["import { ref } from 'vue';\r\nimport { useAuth } from './useAuth';\r\nimport { useLocalStorage } from '@vueuse/core';\r\n\r\nexport function useQuizHistory() {\r\n  const { user } = useAuth();\r\n  const quizHistory = ref([]);\r\n  const storedHistory = useLocalStorage('quizHistory', []);\r\n\r\n  const saveQuiz = async (quizData) => {\r\n    try {\r\n      const newQuiz = {\r\n        id: crypto.randomUUID(),\r\n        ...quizData,\r\n        user_id: user.value?.id,\r\n        created_at: new Date().toISOString()\r\n      };\r\n\r\n      // Add to stored history\r\n      storedHistory.value = [newQuiz, ...storedHistory.value];\r\n      quizHistory.value = storedHistory.value;\r\n\r\n      return { data: newQuiz, error: null };\r\n    } catch (error) {\r\n      console.error('Error saving quiz:', error);\r\n      return { data: null, error };\r\n    }\r\n  };\r\n\r\n  const fetchQuizzes = async () => {\r\n    try {\r\n      // Filter quizzes by user if logged in\r\n      if (user.value) {\r\n        quizHistory.value = storedHistory.value.filter(quiz => quiz.user_id === user.value.id);\r\n      } else {\r\n        quizHistory.value = storedHistory.value;\r\n      }\r\n      return { data: quizHistory.value, error: null };\r\n    } catch (error) {\r\n      console.error('Error fetching quizzes:', error);\r\n      return { data: null, error };\r\n    }\r\n  };\r\n\r\n  const clearHistory = async () => {\r\n    try {\r\n      if (user.value) {\r\n        // Clear only user's quizzes\r\n        storedHistory.value = storedHistory.value.filter(quiz => quiz.user_id !== user.value.id);\r\n      } else {\r\n        // Clear all quizzes\r\n        storedHistory.value = [];\r\n      }\r\n      quizHistory.value = storedHistory.value;\r\n      return { error: null };\r\n    } catch (error) {\r\n      console.error('Error clearing history:', error);\r\n      return { error };\r\n    }\r\n  };\r\n\r\n  return {\r\n    quizHistory,\r\n    saveQuiz,\r\n    fetchQuizzes,\r\n    clearHistory\r\n  };\r\n} "],"mappings":";;;;;;;;;;;AAAA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,OAAO,QAAQ,WAAW;AACnC,SAASC,eAAe,QAAQ,cAAc;AAE9C,OAAO,SAASC,cAAcA,CAAA,EAAG;EAC/B,IAAAC,QAAA,GAAiBH,OAAO,CAAC,CAAC;IAAlBI,IAAI,GAAAD,QAAA,CAAJC,IAAI;EACZ,IAAMC,WAAW,GAAGN,GAAG,CAAC,EAAE,CAAC;EAC3B,IAAMO,aAAa,GAAGL,eAAe,CAAC,aAAa,EAAE,EAAE,CAAC;EAExD,IAAMM,QAAQ;IAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,QAAQ;MAAA,IAAAC,WAAA,EAAAC,OAAA;MAAA,OAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAEtBJ,OAAO,GAAAM,aAAA,CAAAA,aAAA;cACXC,EAAE,EAAEC,MAAM,CAACC,UAAU,CAAC;YAAC,GACpBX,QAAQ;cACXY,OAAO,GAAAX,WAAA,GAAEV,IAAI,CAACsB,KAAK,cAAAZ,WAAA,uBAAVA,WAAA,CAAYQ,EAAE;cACvBK,UAAU,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;YAAC,IAGtC;YACAvB,aAAa,CAACoB,KAAK,IAAIX,OAAO,EAAAe,MAAA,CAAAC,kBAAA,CAAKzB,aAAa,CAACoB,KAAK,EAAC;YACvDrB,WAAW,CAACqB,KAAK,GAAGpB,aAAa,CAACoB,KAAK;YAAC,OAAAR,QAAA,CAAAc,MAAA,WAEjC;cAAEC,IAAI,EAAElB,OAAO;cAAEmB,KAAK,EAAE;YAAK,CAAC;UAAA;YAAAhB,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAiB,EAAA,GAAAjB,QAAA;YAErCkB,OAAO,CAACF,KAAK,CAAC,oBAAoB,EAAAhB,QAAA,CAAAiB,EAAO,CAAC;YAAC,OAAAjB,QAAA,CAAAc,MAAA,WACpC;cAAEC,IAAI,EAAE,IAAI;cAAEC,KAAK,EAAAhB,QAAA,CAAAiB;YAAC,CAAC;UAAA;UAAA;YAAA,OAAAjB,QAAA,CAAAmB,IAAA;QAAA;MAAA,GAAAzB,OAAA;IAAA,CAE/B;IAAA,gBAlBKL,QAAQA,CAAA+B,EAAA;MAAA,OAAA9B,IAAA,CAAA+B,KAAA,OAAAC,SAAA;IAAA;EAAA,GAkBb;EAED,IAAMC,YAAY;IAAA,IAAAC,KAAA,GAAAjC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAgC,SAAA;MAAA,OAAAjC,mBAAA,GAAAM,IAAA,UAAA4B,UAAAC,SAAA;QAAA,kBAAAA,SAAA,CAAA1B,IAAA,GAAA0B,SAAA,CAAAzB,IAAA;UAAA;YAAAyB,SAAA,CAAA1B,IAAA;YAEjB;YACA,IAAIf,IAAI,CAACsB,KAAK,EAAE;cACdrB,WAAW,CAACqB,KAAK,GAAGpB,aAAa,CAACoB,KAAK,CAACoB,MAAM,CAAC,UAAAC,IAAI;gBAAA,OAAIA,IAAI,CAACtB,OAAO,KAAKrB,IAAI,CAACsB,KAAK,CAACJ,EAAE;cAAA,EAAC;YACxF,CAAC,MAAM;cACLjB,WAAW,CAACqB,KAAK,GAAGpB,aAAa,CAACoB,KAAK;YACzC;YAAC,OAAAmB,SAAA,CAAAb,MAAA,WACM;cAAEC,IAAI,EAAE5B,WAAW,CAACqB,KAAK;cAAEQ,KAAK,EAAE;YAAK,CAAC;UAAA;YAAAW,SAAA,CAAA1B,IAAA;YAAA0B,SAAA,CAAAV,EAAA,GAAAU,SAAA;YAE/CT,OAAO,CAACF,KAAK,CAAC,yBAAyB,EAAAW,SAAA,CAAAV,EAAO,CAAC;YAAC,OAAAU,SAAA,CAAAb,MAAA,WACzC;cAAEC,IAAI,EAAE,IAAI;cAAEC,KAAK,EAAAW,SAAA,CAAAV;YAAC,CAAC;UAAA;UAAA;YAAA,OAAAU,SAAA,CAAAR,IAAA;QAAA;MAAA,GAAAM,QAAA;IAAA,CAE/B;IAAA,gBAbKF,YAAYA,CAAA;MAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;EAAA,GAajB;EAED,IAAMQ,YAAY;IAAA,IAAAC,KAAA,GAAAxC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAuC,SAAA;MAAA,OAAAxC,mBAAA,GAAAM,IAAA,UAAAmC,UAAAC,SAAA;QAAA,kBAAAA,SAAA,CAAAjC,IAAA,GAAAiC,SAAA,CAAAhC,IAAA;UAAA;YAAAgC,SAAA,CAAAjC,IAAA;YAEjB,IAAIf,IAAI,CAACsB,KAAK,EAAE;cACd;cACApB,aAAa,CAACoB,KAAK,GAAGpB,aAAa,CAACoB,KAAK,CAACoB,MAAM,CAAC,UAAAC,IAAI;gBAAA,OAAIA,IAAI,CAACtB,OAAO,KAAKrB,IAAI,CAACsB,KAAK,CAACJ,EAAE;cAAA,EAAC;YAC1F,CAAC,MAAM;cACL;cACAhB,aAAa,CAACoB,KAAK,GAAG,EAAE;YAC1B;YACArB,WAAW,CAACqB,KAAK,GAAGpB,aAAa,CAACoB,KAAK;YAAC,OAAA0B,SAAA,CAAApB,MAAA,WACjC;cAAEE,KAAK,EAAE;YAAK,CAAC;UAAA;YAAAkB,SAAA,CAAAjC,IAAA;YAAAiC,SAAA,CAAAjB,EAAA,GAAAiB,SAAA;YAEtBhB,OAAO,CAACF,KAAK,CAAC,yBAAyB,EAAAkB,SAAA,CAAAjB,EAAO,CAAC;YAAC,OAAAiB,SAAA,CAAApB,MAAA,WACzC;cAAEE,KAAK,EAAAkB,SAAA,CAAAjB;YAAC,CAAC;UAAA;UAAA;YAAA,OAAAiB,SAAA,CAAAf,IAAA;QAAA;MAAA,GAAAa,QAAA;IAAA,CAEnB;IAAA,gBAfKF,YAAYA,CAAA;MAAA,OAAAC,KAAA,CAAAV,KAAA,OAAAC,SAAA;IAAA;EAAA,GAejB;EAED,OAAO;IACLnC,WAAW,EAAXA,WAAW;IACXE,QAAQ,EAARA,QAAQ;IACRkC,YAAY,EAAZA,YAAY;IACZO,YAAY,EAAZA;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}