{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport { ref, onMounted, watch } from 'vue';\nimport { useAuth } from '../composables/useAuth';\nimport { useQuizHistory } from '../composables/useQuizHistory';\nexport default {\n  __name: 'QuizHistory',\n  emits: ['showLogin'],\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose,\n      __emit = _ref.emit;\n    __expose();\n    var _useAuth = useAuth(),\n      user = _useAuth.user;\n    var _useQuizHistory = useQuizHistory(),\n      fetchQuizzes = _useQuizHistory.fetchQuizzes;\n    var quizzes = ref([]);\n    var isLoading = ref(false);\n    var error = ref(null);\n\n    // Fetch quizzes when component mounts or user changes\n    var loadQuizzes = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _yield$fetchQuizzes, data, fetchError;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (user.value) {\n                _context.next = 3;\n                break;\n              }\n              quizzes.value = [];\n              return _context.abrupt(\"return\");\n            case 3:\n              isLoading.value = true;\n              error.value = null;\n              _context.prev = 5;\n              _context.next = 8;\n              return fetchQuizzes();\n            case 8:\n              _yield$fetchQuizzes = _context.sent;\n              data = _yield$fetchQuizzes.data;\n              fetchError = _yield$fetchQuizzes.error;\n              if (!fetchError) {\n                _context.next = 13;\n                break;\n              }\n              throw fetchError;\n            case 13:\n              quizzes.value = data || [];\n              _context.next = 20;\n              break;\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](5);\n              console.error('Error fetching quiz history:', _context.t0);\n              error.value = 'Failed to load quiz history. Please try again later.';\n            case 20:\n              _context.prev = 20;\n              isLoading.value = false;\n              return _context.finish(20);\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[5, 16, 20, 23]]);\n      }));\n      return function loadQuizzes() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // Watch for user changes\n    watch(function () {\n      return user.value;\n    }, function (newUser) {\n      if (newUser) {\n        loadQuizzes();\n      } else {\n        quizzes.value = [];\n      }\n    });\n    onMounted(function () {\n      if (user.value) {\n        loadQuizzes();\n      }\n    });\n\n    // Utility functions\n    var formatDate = function formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    };\n    var formatDuration = function formatDuration(seconds) {\n      var minutes = Math.floor(seconds / 60);\n      var remainingSeconds = seconds % 60;\n      return \"\".concat(minutes, \"m \").concat(remainingSeconds, \"s\");\n    };\n    var handleLoginClick = function handleLoginClick() {\n      // Emit event to parent to show login modal\n      emit('showLogin');\n    };\n    var emit = __emit;\n    var __returned__ = {\n      user: user,\n      fetchQuizzes: fetchQuizzes,\n      quizzes: quizzes,\n      isLoading: isLoading,\n      error: error,\n      loadQuizzes: loadQuizzes,\n      formatDate: formatDate,\n      formatDuration: formatDuration,\n      handleLoginClick: handleLoginClick,\n      emit: emit,\n      ref: ref,\n      onMounted: onMounted,\n      watch: watch,\n      get useAuth() {\n        return useAuth;\n      },\n      get useQuizHistory() {\n        return useQuizHistory;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","useAuth","useQuizHistory","_useAuth","user","_useQuizHistory","fetchQuizzes","quizzes","isLoading","error","loadQuizzes","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$fetchQuizzes","data","fetchError","wrap","_callee$","_context","prev","next","value","abrupt","sent","t0","console","finish","stop","apply","arguments","newUser","formatDate","dateString","Date","toLocaleDateString","year","month","day","formatDuration","seconds","minutes","Math","floor","remainingSeconds","concat","handleLoginClick","emit","__emit"],"sources":["C:/Users/StevenJakeASOY/Documents/cursor-projects/src/components/QuizHistory.vue"],"sourcesContent":["<template>\r\n  <div class=\"quiz-history\">\r\n    <div v-if=\"user\" class=\"history-container\">\r\n      <h2>Your Quiz History</h2>\r\n      <div v-if=\"isLoading\" class=\"loading\">\r\n        Loading your quiz history...\r\n      </div>\r\n      <div v-else-if=\"error\" class=\"error\">\r\n        {{ error }}\r\n      </div>\r\n      <div v-else-if=\"quizzes.length === 0\" class=\"empty-state\">\r\n        You haven't taken any quizzes yet. Start one now!\r\n      </div>\r\n      <div v-else class=\"quiz-list\">\r\n        <div v-for=\"quiz in quizzes\" :key=\"quiz.id\" class=\"quiz-item\">\r\n          <div class=\"quiz-header\">\r\n            <h3>{{ quiz.topic || 'General Quiz' }}</h3>\r\n            <span class=\"date\">{{ formatDate(quiz.created_at) }}</span>\r\n          </div>\r\n          <div class=\"quiz-stats\">\r\n            <span class=\"score\">Score: {{ quiz.score }}%</span>\r\n            <span class=\"questions\">Questions: {{ quiz.total_questions }}</span>\r\n            <span class=\"time\">Time: {{ formatDuration(quiz.duration) }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"login-prompt\">\r\n      <div class=\"prompt-content\">\r\n        <h3>Want to Track Your Progress?</h3>\r\n        <p>Log in to view your quiz history and track your improvement over time!</p>\r\n        <button @click=\"handleLoginClick\" class=\"login-btn\">\r\n          Login / Sign Up\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch } from 'vue';\r\nimport { useAuth } from '../composables/useAuth';\r\nimport { useQuizHistory } from '../composables/useQuizHistory';\r\n\r\nconst { user } = useAuth();\r\nconst { fetchQuizzes } = useQuizHistory();\r\n\r\nconst quizzes = ref([]);\r\nconst isLoading = ref(false);\r\nconst error = ref(null);\r\n\r\n// Fetch quizzes when component mounts or user changes\r\nconst loadQuizzes = async () => {\r\n  if (!user.value) {\r\n    quizzes.value = [];\r\n    return;\r\n  }\r\n\r\n  isLoading.value = true;\r\n  error.value = null;\r\n\r\n  try {\r\n    const { data, error: fetchError } = await fetchQuizzes();\r\n    if (fetchError) throw fetchError;\r\n    quizzes.value = data || [];\r\n  } catch (err) {\r\n    console.error('Error fetching quiz history:', err);\r\n    error.value = 'Failed to load quiz history. Please try again later.';\r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n};\r\n\r\n// Watch for user changes\r\nwatch(() => user.value, (newUser) => {\r\n  if (newUser) {\r\n    loadQuizzes();\r\n  } else {\r\n    quizzes.value = [];\r\n  }\r\n});\r\n\r\nonMounted(() => {\r\n  if (user.value) {\r\n    loadQuizzes();\r\n  }\r\n});\r\n\r\n// Utility functions\r\nconst formatDate = (dateString) => {\r\n  return new Date(dateString).toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric'\r\n  });\r\n};\r\n\r\nconst formatDuration = (seconds) => {\r\n  const minutes = Math.floor(seconds / 60);\r\n  const remainingSeconds = seconds % 60;\r\n  return `${minutes}m ${remainingSeconds}s`;\r\n};\r\n\r\nconst handleLoginClick = () => {\r\n  // Emit event to parent to show login modal\r\n  emit('showLogin');\r\n};\r\n\r\nconst emit = defineEmits(['showLogin']);\r\n</script>\r\n\r\n<style scoped>\r\n.quiz-history {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.history-container h2 {\r\n  color: #333;\r\n  margin-bottom: 2rem;\r\n  text-align: center;\r\n}\r\n\r\n.loading, .error, .empty-state {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #666;\r\n}\r\n\r\n.error {\r\n  color: #f44336;\r\n  background-color: #ffebee;\r\n  border-radius: 8px;\r\n}\r\n\r\n.quiz-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.quiz-item {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.quiz-item:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.quiz-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.quiz-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.date {\r\n  color: #666;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.quiz-stats {\r\n  display: flex;\r\n  gap: 1.5rem;\r\n  color: #666;\r\n  font-size: 0.95rem;\r\n}\r\n\r\n.score {\r\n  color: #4caf50;\r\n  font-weight: 600;\r\n}\r\n\r\n.login-prompt {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  background: #f5f5f5;\r\n  border-radius: 12px;\r\n  margin: 2rem 0;\r\n}\r\n\r\n.prompt-content {\r\n  max-width: 400px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.prompt-content h3 {\r\n  color: #333;\r\n  margin-bottom: 1rem;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.prompt-content p {\r\n  color: #666;\r\n  margin-bottom: 2rem;\r\n  line-height: 1.5;\r\n}\r\n\r\n.login-btn {\r\n  background-color: #2196F3;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.8rem 2rem;\r\n  border-radius: 6px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.login-btn:hover {\r\n  background-color: #1976D2;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}