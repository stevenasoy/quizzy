{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { ref, onMounted } from 'vue';\nimport { useLocalStorage } from '@vueuse/core';\nimport { auth } from '../lib/supabase';\nexport function useAuth() {\n  var user = ref(null);\n  var isLoading = ref(true);\n  var error = ref(null);\n\n  // Store temporary quiz history\n  var temporaryHistory = useLocalStorage('temporaryQuizHistory', []);\n\n  // Initialize auth state\n  onMounted(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var _yield$auth$getSessio, session;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return auth.getSession();\n        case 3:\n          _yield$auth$getSessio = _context.sent;\n          session = _yield$auth$getSessio.session;\n          user.value = (session === null || session === void 0 ? void 0 : session.user) || null;\n          _context.next = 12;\n          break;\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          error.value = _context.t0.message;\n          console.error('Auth initialization error:', _context.t0);\n        case 12:\n          _context.prev = 12;\n          isLoading.value = false;\n          return _context.finish(12);\n        case 15:\n          // Listen for auth state changes\n          auth.onAuthStateChange(function (_event, session) {\n            console.log('Auth state changed:', _event, session);\n            user.value = (session === null || session === void 0 ? void 0 : session.user) || null;\n          });\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8, 12, 15]]);\n  })));\n  var signUp = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2) {\n      var email, password, name, _yield$auth$signUp, data, signUpError;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            email = _ref2.email, password = _ref2.password, name = _ref2.name;\n            error.value = null;\n            isLoading.value = true;\n            _context2.prev = 3;\n            console.log('Signing up with:', {\n              email: email,\n              name: name\n            });\n            _context2.next = 7;\n            return auth.signUp({\n              email: email,\n              password: password,\n              options: {\n                data: {\n                  name: name,\n                  avatar_url: null\n                }\n              }\n            });\n          case 7:\n            _yield$auth$signUp = _context2.sent;\n            data = _yield$auth$signUp.data;\n            signUpError = _yield$auth$signUp.error;\n            if (!signUpError) {\n              _context2.next = 12;\n              break;\n            }\n            throw signUpError;\n          case 12:\n            console.log('Signup successful:', data);\n            return _context2.abrupt(\"return\", {\n              data: data,\n              error: null\n            });\n          case 16:\n            _context2.prev = 16;\n            _context2.t0 = _context2[\"catch\"](3);\n            console.error('Signup error in composable:', _context2.t0);\n            error.value = _context2.t0.message;\n            return _context2.abrupt(\"return\", {\n              data: null,\n              error: _context2.t0\n            });\n          case 21:\n            _context2.prev = 21;\n            isLoading.value = false;\n            return _context2.finish(21);\n          case 24:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[3, 16, 21, 24]]);\n    }));\n    return function signUp(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var signIn = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref4) {\n      var email, password, _yield$auth$signIn, data, signInError;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            email = _ref4.email, password = _ref4.password;\n            error.value = null;\n            isLoading.value = true;\n            _context3.prev = 3;\n            _context3.next = 6;\n            return auth.signIn({\n              email: email,\n              password: password\n            });\n          case 6:\n            _yield$auth$signIn = _context3.sent;\n            data = _yield$auth$signIn.data;\n            signInError = _yield$auth$signIn.error;\n            if (!signInError) {\n              _context3.next = 11;\n              break;\n            }\n            throw signInError;\n          case 11:\n            return _context3.abrupt(\"return\", {\n              data: data,\n              error: null\n            });\n          case 14:\n            _context3.prev = 14;\n            _context3.t0 = _context3[\"catch\"](3);\n            error.value = _context3.t0.message;\n            return _context3.abrupt(\"return\", {\n              data: null,\n              error: _context3.t0\n            });\n          case 18:\n            _context3.prev = 18;\n            isLoading.value = false;\n            return _context3.finish(18);\n          case 21:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, null, [[3, 14, 18, 21]]);\n    }));\n    return function signIn(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var signOut = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      var _yield$auth$signOut, signOutError;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            error.value = null;\n            _context4.prev = 1;\n            _context4.next = 4;\n            return auth.signOut();\n          case 4:\n            _yield$auth$signOut = _context4.sent;\n            signOutError = _yield$auth$signOut.error;\n            if (!signOutError) {\n              _context4.next = 8;\n              break;\n            }\n            throw signOutError;\n          case 8:\n            _context4.next = 14;\n            break;\n          case 10:\n            _context4.prev = 10;\n            _context4.t0 = _context4[\"catch\"](1);\n            error.value = _context4.t0.message;\n            console.error('Signout error:', _context4.t0);\n          case 14:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4, null, [[1, 10]]);\n    }));\n    return function signOut() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  return {\n    user: user,\n    isLoading: isLoading,\n    error: error,\n    temporaryHistory: temporaryHistory,\n    signUp: signUp,\n    signIn: signIn,\n    signOut: signOut\n  };\n}","map":{"version":3,"names":["ref","onMounted","useLocalStorage","auth","useAuth","user","isLoading","error","temporaryHistory","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$auth$getSessio","session","wrap","_callee$","_context","prev","next","getSession","sent","value","t0","message","console","finish","onAuthStateChange","_event","log","stop","signUp","_ref3","_callee2","_ref2","email","password","name","_yield$auth$signUp","data","signUpError","_callee2$","_context2","options","avatar_url","abrupt","_x","apply","arguments","signIn","_ref5","_callee3","_ref4","_yield$auth$signIn","signInError","_callee3$","_context3","_x2","signOut","_ref6","_callee4","_yield$auth$signOut","signOutError","_callee4$","_context4"],"sources":["C:/Users/StevenJakeASOY/Documents/cursor-projects/src/composables/useAuth.js"],"sourcesContent":["import { ref, onMounted } from 'vue';\r\nimport { useLocalStorage } from '@vueuse/core';\r\nimport { auth } from '../lib/supabase';\r\n\r\nexport function useAuth() {\r\n  const user = ref(null);\r\n  const isLoading = ref(true);\r\n  const error = ref(null);\r\n\r\n  // Store temporary quiz history\r\n  const temporaryHistory = useLocalStorage('temporaryQuizHistory', []);\r\n\r\n  // Initialize auth state\r\n  onMounted(async () => {\r\n    try {\r\n      const { session } = await auth.getSession();\r\n      user.value = session?.user || null;\r\n    } catch (err) {\r\n      error.value = err.message;\r\n      console.error('Auth initialization error:', err);\r\n    } finally {\r\n      isLoading.value = false;\r\n    }\r\n\r\n    // Listen for auth state changes\r\n    auth.onAuthStateChange((_event, session) => {\r\n      console.log('Auth state changed:', _event, session);\r\n      user.value = session?.user || null;\r\n    });\r\n  });\r\n\r\n  const signUp = async ({ email, password, name }) => {\r\n    error.value = null;\r\n    isLoading.value = true;\r\n    try {\r\n      console.log('Signing up with:', { email, name });\r\n      const { data, error: signUpError } = await auth.signUp({\r\n        email,\r\n        password,\r\n        options: {\r\n          data: {\r\n            name: name,\r\n            avatar_url: null\r\n          }\r\n        }\r\n      });\r\n      \r\n      if (signUpError) throw signUpError;\r\n      console.log('Signup successful:', data);\r\n      return { data, error: null };\r\n    } catch (err) {\r\n      console.error('Signup error in composable:', err);\r\n      error.value = err.message;\r\n      return { data: null, error: err };\r\n    } finally {\r\n      isLoading.value = false;\r\n    }\r\n  };\r\n\r\n  const signIn = async ({ email, password }) => {\r\n    error.value = null;\r\n    isLoading.value = true;\r\n    try {\r\n      const { data, error: signInError } = await auth.signIn({\r\n        email,\r\n        password\r\n      });\r\n      if (signInError) throw signInError;\r\n      return { data, error: null };\r\n    } catch (err) {\r\n      error.value = err.message;\r\n      return { data: null, error: err };\r\n    } finally {\r\n      isLoading.value = false;\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    error.value = null;\r\n    try {\r\n      const { error: signOutError } = await auth.signOut();\r\n      if (signOutError) throw signOutError;\r\n    } catch (err) {\r\n      error.value = err.message;\r\n      console.error('Signout error:', err);\r\n    }\r\n  };\r\n\r\n  return {\r\n    user,\r\n    isLoading,\r\n    error,\r\n    temporaryHistory,\r\n    signUp,\r\n    signIn,\r\n    signOut\r\n  };\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}