{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"questions-display\"\n};\nconst _hoisted_2 = {\n  class: \"questions-container\"\n};\nconst _hoisted_3 = {\n  class: \"question\"\n};\nconst _hoisted_4 = {\n  class: \"question-number\"\n};\nconst _hoisted_5 = {\n  class: \"answer-section\"\n};\nconst _hoisted_6 = [\"onUpdate:modelValue\", \"placeholder\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"h2\", null, \"Generated Questions\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.questions, (question, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"question-card\"\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", _hoisted_4, _toDisplayString(index + 1) + \".\", 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString(question), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"textarea\", {\n      \"onUpdate:modelValue\": $event => $setup.answers[index] = $event,\n      placeholder: 'Type your answer for question ' + (index + 1),\n      rows: \"3\",\n      class: \"answer-input\"\n    }, null, 8 /* PROPS */, _hoisted_6), [[_vModelText, $setup.answers[index]]])])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", {\n    class: \"actions\"\n  }, [_createElementVNode(\"button\", {\n    onClick: $setup.handleSubmit,\n    class: \"submit-answers-btn\"\n  }, \"Submit Answers\")])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","$props","questions","question","index","key","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","$event","$setup","answers","placeholder","rows","_hoisted_6","onClick","handleSubmit"],"sources":["C:\\Users\\StevenJakeASOY\\Documents\\cursor-projects\\src\\components\\QuestionsDisplay.vue"],"sourcesContent":["<template>\r\n  <div class=\"questions-display\">\r\n    <h2>Generated Questions</h2>\r\n    <div class=\"questions-container\">\r\n      <div v-for=\"(question, index) in questions\" :key=\"index\" class=\"question-card\">\r\n        <div class=\"question\">\r\n          <span class=\"question-number\">{{ index + 1 }}.</span>\r\n          <p>{{ question }}</p>\r\n        </div>\r\n        <div class=\"answer-section\">\r\n          <textarea\r\n            v-model=\"answers[index]\"\r\n            :placeholder=\"'Type your answer for question ' + (index + 1)\"\r\n            rows=\"3\"\r\n            class=\"answer-input\"\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"actions\">\r\n      <button @click=\"handleSubmit\" class=\"submit-answers-btn\">Submit Answers</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps, defineEmits } from 'vue';\r\nimport axios from 'axios';\r\nimport mammoth from \"mammoth\";\r\nimport * as pdfjsLib from \"pdfjs-dist\";\r\nimport JSZip from \"jszip\";\r\nimport pptxParser from \"pptx-parser\";\r\n\r\nconst props = defineProps({\r\n  questions: {\r\n    type: Array,\r\n    required: true\r\n  }\r\n});\r\n\r\nconst answers = ref([]);\r\nconst emit = defineEmits(['submit-answers']);\r\n\r\n// Initialize answers array with empty strings\r\nanswers.value = Array(props.questions.length).fill('');\r\n\r\nconst readFileContent = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    if (file.type === \"text/plain\") {\r\n      // Plain text\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => resolve(e.target.result);\r\n      reader.onerror = (e) => reject(e);\r\n      reader.readAsText(file);\r\n    } else if (\r\n      file.type === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n    ) {\r\n      // DOCX\r\n      const reader = new FileReader();\r\n      reader.onload = async (e) => {\r\n        try {\r\n          const arrayBuffer = e.target.result;\r\n          const result = await mammoth.extractRawText({ arrayBuffer });\r\n          resolve(result.value);\r\n        } catch (err) {\r\n          resolve(\"[Could not extract DOCX text]\");\r\n        }\r\n      };\r\n      reader.onerror = (e) => reject(e);\r\n      reader.readAsArrayBuffer(file);\r\n    } else if (file.type === \"application/pdf\") {\r\n      // PDF\r\n      const reader = new FileReader();\r\n      reader.onload = async (e) => {\r\n        try {\r\n          const typedArray = new Uint8Array(e.target.result);\r\n          const pdf = await pdfjsLib.getDocument({ data: typedArray }).promise;\r\n          let text = \"\";\r\n          for (let i = 1; i <= pdf.numPages; i++) {\r\n            const page = await pdf.getPage(i);\r\n            const content = await page.getTextContent();\r\n            text += content.items.map((item) => item.str).join(\" \") + \"\\n\";\r\n          }\r\n          resolve(text);\r\n        } catch (err) {\r\n          resolve(\"[Could not extract PDF text]\");\r\n        }\r\n      };\r\n      reader.onerror = (e) => reject(e);\r\n      reader.readAsArrayBuffer(file);\r\n    } else if (\r\n      file.type === \"application/vnd.openxmlformats-officedocument.presentationml.presentation\"\r\n    ) {\r\n      // PPTX\r\n      const reader = new FileReader();\r\n      reader.onload = async (e) => {\r\n        try {\r\n          const zip = await JSZip.loadAsync(e.target.result);\r\n          pptxParser(zip)\r\n            .then((slides) => {\r\n              const text = slides\r\n                .map((slide) =>\r\n                  slide.texts ? slide.texts.map((t) => t.text).join(\" \") : \"\"\r\n                )\r\n                .join(\"\\n\");\r\n              resolve(text);\r\n            })\r\n            .catch(() => resolve(\"[Could not extract PPTX text]\"));\r\n        } catch (err) {\r\n          resolve(\"[Could not extract PPTX text]\");\r\n        }\r\n      };\r\n      reader.onerror = (e) => reject(e);\r\n      reader.readAsArrayBuffer(file);\r\n    } else {\r\n      resolve(`[${file.name} is not a supported file type.]`);\r\n    }\r\n  });\r\n};\r\n\r\nconst handleSubmit = async () => {\r\n  if (!isFormValid.value) return;\r\n\r\n  isLoading.value = true;\r\n  error.value = '';\r\n  generatedQuestions.value = [];\r\n\r\n  try {\r\n    // Log file info\r\n    console.log('Selected files:', selectedFiles.value.map(f => ({ name: f.name, type: f.type })));\r\n\r\n    // Read all file contents\r\n    const fileContents = await Promise.all(\r\n      selectedFiles.value.map(file => {\r\n        if (file.type === 'text/plain') {\r\n          return readFileContent(file);\r\n        } else {\r\n          console.warn(`File ${file.name} is not a plain text file. Only .txt files will be read as content.`);\r\n          return Promise.resolve(`[${file.name} is not a .txt file. Its content is not included.]`);\r\n        }\r\n      })\r\n    );\r\n\r\n    // Combine all file contents\r\n    const combinedContent = fileContents.join('\\n\\n');\r\n    console.log('Combined file content sent to Gemini:', combinedContent);\r\n\r\n    // Prepare the prompt for Gemini\r\n    const prompt = `Based on the following content, generate ${questionCount.value} relevant questions. \r\n    The questions should test understanding of the key concepts and details in the content.\r\n    Format each question on a new line starting with a number and period (e.g., \"1. What is...\")\r\n    Content: ${combinedContent}`;\r\n\r\n    // Call Gemini API\r\n    const response = await axios.post(\r\n      `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${process.env.VUE_APP_GEMINI_API_KEY}`,\r\n      {\r\n        contents: [{\r\n          parts: [{\r\n            text: prompt\r\n          }]\r\n        }],\r\n        generationConfig: {\r\n          temperature: 0.7,\r\n          topK: 40,\r\n          topP: 0.95,\r\n          maxOutputTokens: 1024,\r\n        }\r\n      },\r\n      {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      }\r\n    );\r\n\r\n    console.log('API Response:', response.data);\r\n\r\n    // Extract questions from the response\r\n    const generatedText = response.data.candidates[0].content.parts[0].text;\r\n    const questions = generatedText.split('\\n')\r\n      .filter(line => line.trim().length > 0 && /^\\d+\\./.test(line))\r\n      .map(q => q.replace(/^\\d+\\.\\s*/, '').trim());\r\n\r\n    generatedQuestions.value = questions;\r\n    showQuestions.value = true;\r\n  } catch (err) {\r\n    console.error('Detailed Error:', err.response ? err.response.data : err);\r\n    error.value = `Error generating questions: ${err.response ? err.response.data.error?.message || 'Unknown error' : err.message}`;\r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.questions-display {\r\n  margin-top: 2rem;\r\n  padding: 1rem;\r\n  background-color: #f8f8f8;\r\n  border-radius: 8px;\r\n}\r\n\r\nh2 {\r\n  color: #333;\r\n  margin-bottom: 1.5rem;\r\n  text-align: center;\r\n}\r\n\r\n.questions-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.question-card {\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.question {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.question-number {\r\n  font-weight: bold;\r\n  color: #4CAF50;\r\n}\r\n\r\n.answer-section {\r\n  margin-top: 1rem;\r\n}\r\n\r\n.answer-input {\r\n  width: 100%;\r\n  padding: 0.8rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  resize: vertical;\r\n  min-height: 80px;\r\n}\r\n\r\n.answer-input:focus {\r\n  outline: none;\r\n  border-color: #4CAF50;\r\n  box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);\r\n}\r\n\r\n.actions {\r\n  margin-top: 2rem;\r\n  text-align: center;\r\n}\r\n\r\n.submit-answers-btn {\r\n  padding: 0.8rem 2rem;\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.submit-answers-btn:hover {\r\n  background-color: #45a049;\r\n}\r\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAmB;;EAEvBA,KAAK,EAAC;AAAqB;;EAEvBA,KAAK,EAAC;AAAU;;EACbA,KAAK,EAAC;AAAiB;;EAG1BA,KAAK,EAAC;AAAgB;mBATnC;;uBACEC,mBAAA,CAqBM,OArBNC,UAqBM,G,0BApBJC,mBAAA,CAA4B,YAAxB,qBAAmB,sBACvBA,mBAAA,CAeM,OAfNC,UAeM,I,kBAdJH,mBAAA,CAaMI,SAAA,QAjBZC,WAAA,CAIuCC,MAAA,CAAAC,SAAS,EAJhD,CAImBC,QAAQ,EAAEC,KAAK;yBAA5BT,mBAAA,CAaM;MAbuCU,GAAG,EAAED,KAAK;MAAEV,KAAK,EAAC;QAC7DG,mBAAA,CAGM,OAHNS,UAGM,GAFJT,mBAAA,CAAqD,QAArDU,UAAqD,EAAAC,gBAAA,CAApBJ,KAAK,QAAO,GAAC,iBAC9CP,mBAAA,CAAqB,WAAAW,gBAAA,CAAfL,QAAQ,iB,GAEhBN,mBAAA,CAOM,OAPNY,UAOM,G,gBANJZ,mBAAA,CAKY;MAftB,uBAAAa,MAAA,IAWqBC,MAAA,CAAAC,OAAO,CAACR,KAAK,IAAAM,MAAA;MACrBG,WAAW,sCAAsCT,KAAK;MACvDU,IAAI,EAAC,GAAG;MACRpB,KAAK,EAAC;4BAdlBqB,UAAA,I,cAWqBJ,MAAA,CAAAC,OAAO,CAACR,KAAK,G;oCAQ9BP,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAAS,IAClBG,mBAAA,CAAgF;IAAvEmB,OAAK,EAAEL,MAAA,CAAAM,YAAY;IAAEvB,KAAK,EAAC;KAAqB,gBAAc,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}