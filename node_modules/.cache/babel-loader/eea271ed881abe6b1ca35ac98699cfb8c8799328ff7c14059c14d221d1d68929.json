{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"C:/Users/StevenJakeASOY/Documents/cursor-projects/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport { ref } from 'vue';\nimport { useAuth } from './useAuth';\nimport { supabase } from '../lib/supabase';\nexport function useQuizHistory() {\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  var quizHistory = ref([]);\n  var saveQuiz = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(quizData) {\n      var _yield$supabase$from$, data, error;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            if (user.value) {\n              _context.next = 3;\n              break;\n            }\n            return _context.abrupt(\"return\", {\n              data: null,\n              error: null\n            });\n          case 3:\n            _context.next = 5;\n            return supabase.from('quiz_history').insert([_objectSpread(_objectSpread({}, quizData), {}, {\n              user_id: user.value.id,\n              created_at: new Date().toISOString()\n            })]).select();\n          case 5:\n            _yield$supabase$from$ = _context.sent;\n            data = _yield$supabase$from$.data;\n            error = _yield$supabase$from$.error;\n            if (!error) {\n              _context.next = 10;\n              break;\n            }\n            throw error;\n          case 10:\n            return _context.abrupt(\"return\", {\n              data: data,\n              error: null\n            });\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](0);\n            console.error('Error saving quiz:', _context.t0);\n            return _context.abrupt(\"return\", {\n              data: null,\n              error: _context.t0\n            });\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n    return function saveQuiz(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var fetchQuizzes = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var _yield$supabase$from$2, data, error;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            if (user.value) {\n              _context2.next = 4;\n              break;\n            }\n            quizHistory.value = [];\n            return _context2.abrupt(\"return\", {\n              data: [],\n              error: null\n            });\n          case 4:\n            _context2.next = 6;\n            return supabase.from('quiz_history').select('*').eq('user_id', user.value.id).order('created_at', {\n              ascending: false\n            });\n          case 6:\n            _yield$supabase$from$2 = _context2.sent;\n            data = _yield$supabase$from$2.data;\n            error = _yield$supabase$from$2.error;\n            if (!error) {\n              _context2.next = 11;\n              break;\n            }\n            throw error;\n          case 11:\n            quizHistory.value = data || [];\n            return _context2.abrupt(\"return\", {\n              data: data,\n              error: null\n            });\n          case 15:\n            _context2.prev = 15;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.error('Error fetching quizzes:', _context2.t0);\n            return _context2.abrupt(\"return\", {\n              data: null,\n              error: _context2.t0\n            });\n          case 19:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[0, 15]]);\n    }));\n    return function fetchQuizzes() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var clearHistory = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var _yield$supabase$from$3, error;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            if (user.value) {\n              _context3.next = 3;\n              break;\n            }\n            return _context3.abrupt(\"return\", {\n              error: null\n            });\n          case 3:\n            _context3.next = 5;\n            return supabase.from('quiz_history')[\"delete\"]().eq('user_id', user.value.id);\n          case 5:\n            _yield$supabase$from$3 = _context3.sent;\n            error = _yield$supabase$from$3.error;\n            if (!error) {\n              _context3.next = 9;\n              break;\n            }\n            throw error;\n          case 9:\n            quizHistory.value = [];\n            return _context3.abrupt(\"return\", {\n              error: null\n            });\n          case 13:\n            _context3.prev = 13;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.error('Error clearing history:', _context3.t0);\n            return _context3.abrupt(\"return\", {\n              error: _context3.t0\n            });\n          case 17:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3, null, [[0, 13]]);\n    }));\n    return function clearHistory() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return {\n    quizHistory: quizHistory,\n    saveQuiz: saveQuiz,\n    fetchQuizzes: fetchQuizzes,\n    clearHistory: clearHistory\n  };\n}","map":{"version":3,"names":["ref","useAuth","supabase","useQuizHistory","_useAuth","user","quizHistory","saveQuiz","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","quizData","_yield$supabase$from$","data","error","wrap","_callee$","_context","prev","next","value","abrupt","from","insert","_objectSpread","user_id","id","created_at","Date","toISOString","select","sent","t0","console","stop","_x","apply","arguments","fetchQuizzes","_ref2","_callee2","_yield$supabase$from$2","_callee2$","_context2","eq","order","ascending","clearHistory","_ref3","_callee3","_yield$supabase$from$3","_callee3$","_context3"],"sources":["C:/Users/StevenJakeASOY/Documents/cursor-projects/src/composables/useQuizHistory.js"],"sourcesContent":["import { ref } from 'vue';\r\nimport { useAuth } from './useAuth';\r\nimport { supabase } from '../lib/supabase';\r\n\r\nexport function useQuizHistory() {\r\n  const { user } = useAuth();\r\n  const quizHistory = ref([]);\r\n\r\n  const saveQuiz = async (quizData) => {\r\n    try {\r\n      // Only save quiz if user is logged in\r\n      if (!user.value) {\r\n        return { data: null, error: null }; // Silently ignore for non-authenticated users\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('quiz_history')\r\n        .insert([{\r\n          ...quizData,\r\n          user_id: user.value.id,\r\n          created_at: new Date().toISOString()\r\n        }])\r\n        .select();\r\n\r\n      if (error) throw error;\r\n      return { data, error: null };\r\n    } catch (error) {\r\n      console.error('Error saving quiz:', error);\r\n      return { data: null, error };\r\n    }\r\n  };\r\n\r\n  const fetchQuizzes = async () => {\r\n    try {\r\n      // Only fetch quizzes if user is logged in\r\n      if (!user.value) {\r\n        quizHistory.value = [];\r\n        return { data: [], error: null };\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('quiz_history')\r\n        .select('*')\r\n        .eq('user_id', user.value.id)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      \r\n      quizHistory.value = data || [];\r\n      return { data, error: null };\r\n    } catch (error) {\r\n      console.error('Error fetching quizzes:', error);\r\n      return { data: null, error };\r\n    }\r\n  };\r\n\r\n  const clearHistory = async () => {\r\n    try {\r\n      if (!user.value) {\r\n        return { error: null };\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from('quiz_history')\r\n        .delete()\r\n        .eq('user_id', user.value.id);\r\n\r\n      if (error) throw error;\r\n      \r\n      quizHistory.value = [];\r\n      return { error: null };\r\n    } catch (error) {\r\n      console.error('Error clearing history:', error);\r\n      return { error };\r\n    }\r\n  };\r\n\r\n  return {\r\n    quizHistory,\r\n    saveQuiz,\r\n    fetchQuizzes,\r\n    clearHistory\r\n  };\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}